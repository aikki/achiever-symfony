{% extends 'base.html.twig' %}

{% block title %}
	{{ club.name }}
{% endblock %}

{% block body %}
	{% include 'club/components/_club_header.html.twig' %}
	<div class="container">
		{% for flashError in app.flashes('note') %}
			<div class="alert alert-warning mt-3" role="alert">{{ flashError|raw }}</div>
		{% endfor %}
		{% for flashSuccess in app.flashes('success') %}
			<div class="alert alert-success mt-3" role="alert">{{ flashSuccess|raw }}</div>
		{% endfor %}
		<div class="row">
			<div class="col">
            <h2 class="mt-3">Cele w klubie</h2>
				{% if goals is not empty %}
				<ul class="list-group mt-4">
					{% for goal in goals %}
						<li class="list-group-item">
							<div class="row">
								<div class="col-auto">
									<h1 class="mt-2 ms-2">
									<i class="{{ goal.iconClassName | default("bi-star")  }}"></i>
									</h1>
								</div>
								<div class="col">
									<div class="d-flex w-100 justify-content-between">
										<h5 class="mb-1 mt-2">
										{{ goal.name }}
										</h5>
									</div>

									<p class="text-muted">{{ goal.description }}</p>
								</div>
								<div class="col-12 col-md-auto">
									{% if goal.isAchieved %}
										<button disabled class="btn btn-primary w-100">Wykonane</button>
									{% elseif goal.isAchieved is null %}
										<button disabled class="btn btn-dark">Status nieznany, odśwież stronę</button>
									{% else %}
										<a class="btn btn-success w-100" href="{{ path('goal_achieve', { id: goal.id }) }}">Wykonaj</a>
									{% endif %}
								</div>
							</div>
						</li>
					{% endfor %}
				</ul>
				{% else %}
					<p class="text-muted">
						Nie zdefiniowano jeszcze żadnych celów.
						{% if is_owner %}
						<br/><a href="{{ path('goal_create', { id: club.id }) }}">Utwórz cel</a>
						{% endif %}
					</p>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
